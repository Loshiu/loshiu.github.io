import{C as _e,D as te,G as Ee,H as X,b as ue,d as ne,a as ce,u as de,o as E,q as N,n as f,h as t,r as U,I as L,x as _,j as ae,_ as fe,z as Ce,y as he,l as ve,m as we,e as me,J as pe,K as Le,L as Te,M as be,N as Se,O as S,P as xe,Q as Oe,c as x,R as le,S as ke,T as Ie,g as oe,s as y,w as $,U as ze,V as D,W as $e,X as Ne,Y as Ae,F as ie,Z as Re,$ as Me,k as Be,a0 as Ve,a1 as De,v as Fe,a2 as Pe,a3 as We,a4 as Xe,a5 as Ye,a6 as j,a7 as Z,a8 as He,a9 as je,aa as Ze,ab as Ue,ac as qe,ad as Ge,ae as Ke}from"./index.268a4254.js";var Je=/\s/;function Qe(n){for(var r=n.length;r--&&Je.test(n.charAt(r)););return r}var et=/^\s+/;function tt(n){return n&&n.slice(0,Qe(n)+1).replace(et,"")}var ge=0/0,nt=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,st=/^0o[0-7]+$/i,rt=parseInt;function ye(n){if(typeof n=="number")return n;if(_e(n))return ge;if(te(n)){var r=typeof n.valueOf=="function"?n.valueOf():n;n=te(r)?r+"":r}if(typeof n!="string")return n===0?n:+n;n=tt(n);var a=at.test(n);return a||st.test(n)?rt(n.slice(2),a?2:8):nt.test(n)?ge:+n}var lt=function(){return Ee.Date.now()};const se=lt;var ot="Expected a function",it=Math.max,ut=Math.min;function ct(n,r,a){var o,k,w,i,m,h,p=0,I=!1,g=!1,d=!0;if(typeof n!="function")throw new TypeError(ot);r=ye(r)||0,te(a)&&(I=!!a.leading,g="maxWait"in a,w=g?it(ye(a.maxWait)||0,r):w,d="trailing"in a?!!a.trailing:d);function v(u){var C=o,M=k;return o=k=void 0,p=u,i=n.apply(M,C),i}function c(u){return p=u,m=setTimeout(R,r),I?v(u):i}function F(u){var C=u-h,M=u-p,W=r-C;return g?ut(W,w-M):W}function A(u){var C=u-h,M=u-p;return h===void 0||C>=r||C<0||g&&M>=w}function R(){var u=se();if(A(u))return Y(u);m=setTimeout(R,F(u))}function Y(u){return m=void 0,d&&o?v(u):(o=k=void 0,i)}function P(){m!==void 0&&clearTimeout(m),p=0,o=h=k=m=void 0}function q(){return m===void 0?i:Y(se())}function O(){var u=se(),C=A(u);if(o=arguments,k=this,h=u,C){if(m===void 0)return c(h);if(g)return clearTimeout(m),m=setTimeout(R,r),v(h)}return m===void 0&&(m=setTimeout(R,r)),i}return O.cancel=P,O.flush=q,O}var dt="Expected a function";function re(n,r,a){var o=!0,k=!0;if(typeof n!="function")throw new TypeError(dt);return te(a)&&(o="leading"in a?!!a.leading:o,k="trailing"in a?!!a.trailing:k),ct(n,r,{leading:o,maxWait:r,trailing:k})}const ft=(n,r)=>{if(!X||!n||!r)return!1;const a=n.getBoundingClientRect();let o;return r instanceof Element?o=r.getBoundingClientRect():o={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},a.top<o.bottom&&a.bottom>o.top&&a.right>o.left&&a.left<o.right},vt=n=>Object.keys(n),mt=()=>X&&/firefox/i.test(window.navigator.userAgent),pt=ue({header:{type:String,default:""},bodyStyle:{type:ne([String,Object,Array]),default:""},shadow:{type:String,values:["always","hover","never"],default:"always"}}),gt={name:"ElCard"},yt=ce({...gt,props:pt,setup(n){const r=de("card");return(a,o)=>(E(),N("div",{class:f([t(r).b(),t(r).is(`${a.shadow}-shadow`)])},[a.$slots.header||a.header?(E(),N("div",{key:0,class:f(t(r).e("header"))},[U(a.$slots,"header",{},()=>[Ce(he(a.header),1)])],2)):L("v-if",!0),_("div",{class:f(t(r).e("body")),style:ae(a.bodyStyle)},[U(a.$slots,"default")],6)],2))}});var ht=fe(yt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const At=ve(ht),wt=ue({urlList:{type:ne(Array),default:()=>we([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),bt={close:()=>!0,switch:n=>me(n)},kt=["src"],It={name:"ElImageViewer"},_t=ce({...It,props:wt,emits:bt,setup(n,{emit:r}){const a=n,o={CONTAIN:{name:"contain",icon:pe(Le)},ORIGINAL:{name:"original",icon:pe(Te)}},k=mt()?"DOMMouseScroll":"mousewheel",{t:w}=be(),i=de("image-viewer"),{nextZIndex:m}=Se(),h=S(),p=S([]),I=xe(),g=S(!0),d=S(a.initialIndex),v=Oe(o.CONTAIN),c=S({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),F=x(()=>{const{urlList:s}=a;return s.length<=1}),A=x(()=>d.value===0),R=x(()=>d.value===a.urlList.length-1),Y=x(()=>a.urlList[d.value]),P=x(()=>{const{scale:s,deg:e,offsetX:l,offsetY:b,enableTransition:B}=c.value;let T=l/s,V=b/s;switch(e%360){case 90:case-270:[T,V]=[V,-T];break;case 180:case-180:[T,V]=[-T,-V];break;case 270:case-90:[T,V]=[-V,T];break}const H={transform:`scale(${s}) rotate(${e}deg) translate(${T}px, ${V}px)`,transition:B?"transform .3s":""};return v.value.name===o.CONTAIN.name&&(H.maxWidth=H.maxHeight="100%"),H}),q=x(()=>me(a.zIndex)?a.zIndex:m());function O(){C(),r("close")}function u(){const s=re(l=>{switch(l.code){case j.esc:a.closeOnPressEscape&&O();break;case j.space:K();break;case j.left:Q();break;case j.up:z("zoomIn");break;case j.right:ee();break;case j.down:z("zoomOut");break}}),e=re(l=>{(l.wheelDelta?l.wheelDelta:-l.detail)>0?z("zoomIn",{zoomRate:1.2,enableTransition:!1}):z("zoomOut",{zoomRate:1.2,enableTransition:!1})});I.run(()=>{Z(document,"keydown",s),Z(document,k,e)})}function C(){I.stop()}function M(){g.value=!1}function W(s){g.value=!1,s.target.alt=w("el.image.error")}function J(s){if(g.value||s.button!==0||!h.value)return;c.value.enableTransition=!1;const{offsetX:e,offsetY:l}=c.value,b=s.pageX,B=s.pageY,T=re(H=>{c.value={...c.value,offsetX:e+H.pageX-b,offsetY:l+H.pageY-B}}),V=Z(document,"mousemove",T);Z(document,"mouseup",()=>{V()}),s.preventDefault()}function G(){c.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function K(){if(g.value)return;const s=vt(o),e=Object.values(o),l=v.value.name,B=(e.findIndex(T=>T.name===l)+1)%s.length;v.value=o[s[B]],G()}function Q(){if(A.value&&!a.infinite)return;const s=a.urlList.length;d.value=(d.value-1+s)%s}function ee(){if(R.value&&!a.infinite)return;const s=a.urlList.length;d.value=(d.value+1)%s}function z(s,e={}){if(g.value)return;const{zoomRate:l,rotateDeg:b,enableTransition:B}={zoomRate:1.4,rotateDeg:90,enableTransition:!0,...e};switch(s){case"zoomOut":c.value.scale>.2&&(c.value.scale=Number.parseFloat((c.value.scale/l).toFixed(3)));break;case"zoomIn":c.value.scale<7&&(c.value.scale=Number.parseFloat((c.value.scale*l).toFixed(3)));break;case"clockwise":c.value.deg+=b;break;case"anticlockwise":c.value.deg-=b;break}c.value.enableTransition=B}return le(Y,()=>{ke(()=>{const s=p.value[0];s!=null&&s.complete||(g.value=!0)})}),le(d,s=>{G(),r("switch",s)}),Ie(()=>{var s,e;u(),(e=(s=h.value)==null?void 0:s.focus)==null||e.call(s)}),(s,e)=>(E(),oe(Ye,{to:"body",disabled:!s.teleported},[y(Xe,{name:"viewer-fade",appear:""},{default:$(()=>[_("div",{ref_key:"wrapper",ref:h,tabindex:-1,class:f(t(i).e("wrapper")),style:ae({zIndex:t(q)})},[_("div",{class:f(t(i).e("mask")),onClick:e[0]||(e[0]=ze(l=>s.hideOnClickModal&&O(),["self"]))},null,2),L(" CLOSE "),_("span",{class:f([t(i).e("btn"),t(i).e("close")]),onClick:O},[y(t(D),null,{default:$(()=>[y(t($e))]),_:1})],2),L(" ARROW "),t(F)?L("v-if",!0):(E(),N(ie,{key:0},[_("span",{class:f([t(i).e("btn"),t(i).e("prev"),t(i).is("disabled",!s.infinite&&t(A))]),onClick:Q},[y(t(D),null,{default:$(()=>[y(t(Ne))]),_:1})],2),_("span",{class:f([t(i).e("btn"),t(i).e("next"),t(i).is("disabled",!s.infinite&&t(R))]),onClick:ee},[y(t(D),null,{default:$(()=>[y(t(Ae))]),_:1})],2)],64)),L(" ACTIONS "),_("div",{class:f([t(i).e("btn"),t(i).e("actions")])},[_("div",{class:f(t(i).e("actions__inner"))},[y(t(D),{onClick:e[1]||(e[1]=l=>z("zoomOut"))},{default:$(()=>[y(t(Re))]),_:1}),y(t(D),{onClick:e[2]||(e[2]=l=>z("zoomIn"))},{default:$(()=>[y(t(Me))]),_:1}),_("i",{class:f(t(i).e("actions__divider"))},null,2),y(t(D),{onClick:K},{default:$(()=>[(E(),oe(Be(t(v).icon)))]),_:1}),_("i",{class:f(t(i).e("actions__divider"))},null,2),y(t(D),{onClick:e[3]||(e[3]=l=>z("anticlockwise"))},{default:$(()=>[y(t(Ve))]),_:1}),y(t(D),{onClick:e[4]||(e[4]=l=>z("clockwise"))},{default:$(()=>[y(t(De))]),_:1})],2)],2),L(" CANVAS "),_("div",{class:f(t(i).e("canvas"))},[(E(!0),N(ie,null,Fe(s.urlList,(l,b)=>Pe((E(),N("img",{ref_for:!0,ref:B=>p.value[b]=B,key:l,src:l,style:ae(t(P)),class:f(t(i).e("img")),onLoad:M,onError:W,onMousedown:J},null,46,kt)),[[We,b===d.value]])),128))],2),U(s.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var Et=fe(_t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const Ct=ve(Et),Lt=ue({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:ne([String,Object])},previewSrcList:{type:ne(Array),default:()=>we([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),Tt={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>me(n),close:()=>!0,show:()=>!0},St=["src","loading"],xt={key:0},Ot={name:"ElImage",inheritAttrs:!1},zt=ce({...Ot,props:Lt,emits:Tt,setup(n,{emit:r}){const a=n;let o="";const{t:k}=be(),w=de("image"),i=He(),m=je(),h=S(),p=S(!1),I=S(!0),g=S(!1),d=S(),v=S(),c=X&&"loading"in HTMLImageElement.prototype;let F,A;const R=x(()=>i.style),Y=x(()=>{const{fit:e}=a;return X&&e?{objectFit:e}:{}}),P=x(()=>{const{previewSrcList:e}=a;return Array.isArray(e)&&e.length>0}),q=x(()=>{const{previewSrcList:e,initialIndex:l}=a;let b=l;return l>e.length-1&&(b=0),b}),O=x(()=>a.loading==="eager"?!1:!c&&a.loading==="lazy"||a.lazy),u=()=>{!X||(I.value=!0,p.value=!1,h.value=a.src)};function C(e){I.value=!1,p.value=!1,r("load",e)}function M(e){I.value=!1,p.value=!0,r("error",e)}function W(){ft(d.value,v.value)&&(u(),K())}const J=Ke(W,200);async function G(){var e;if(!X)return;await ke();const{scrollContainer:l}=a;Ue(l)?v.value=l:qe(l)&&l!==""?v.value=(e=document.querySelector(l))!=null?e:void 0:d.value&&(v.value=Ge(d.value)),v.value&&(F=Z(v,"scroll",J),setTimeout(()=>W(),100))}function K(){!X||!v.value||!J||(F==null||F(),v.value=void 0)}function Q(e){if(!!e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function ee(){!P.value||(A=Z("wheel",Q,{passive:!1}),o=document.body.style.overflow,document.body.style.overflow="hidden",g.value=!0,r("show"))}function z(){A==null||A(),document.body.style.overflow=o,g.value=!1,r("close")}function s(e){r("switch",e)}return le(()=>a.src,()=>{O.value?(I.value=!0,p.value=!1,K(),G()):u()}),Ie(()=>{O.value?G():u()}),(e,l)=>(E(),N("div",{ref_key:"container",ref:d,class:f([t(w).b(),e.$attrs.class]),style:ae(t(R))},[h.value!==void 0&&!p.value?(E(),N("img",Ze({key:0},t(m),{src:h.value,loading:e.loading,style:t(Y),class:[t(w).e("inner"),t(P)&&t(w).e("preview"),I.value&&t(w).is("loading")],onClick:ee,onLoad:C,onError:M}),null,16,St)):L("v-if",!0),I.value||p.value?(E(),N("div",{key:1,class:f(t(w).e("wrapper"))},[I.value?U(e.$slots,"placeholder",{key:0},()=>[_("div",{class:f(t(w).e("placeholder"))},null,2)]):p.value?U(e.$slots,"error",{key:1},()=>[_("div",{class:f(t(w).e("error"))},he(t(k)("el.image.error")),3)]):L("v-if",!0)],2)):L("v-if",!0),t(P)?(E(),N(ie,{key:2},[g.value?(E(),oe(t(Ct),{key:0,"z-index":e.zIndex,"initial-index":t(q),infinite:e.infinite,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:z,onSwitch:s},{default:$(()=>[e.$slots.viewer?(E(),N("div",xt,[U(e.$slots,"viewer")])):L("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):L("v-if",!0)],64)):L("v-if",!0)],6))}});var $t=fe(zt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const Rt=ve($t);export{Rt as E,At as a,re as t};
